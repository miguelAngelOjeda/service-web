
<h4 mat-dialog-title class="m-0"><mat-icon class="gray-text">supervisor_account</mat-icon>Agendas</h4>
<form [formGroup]="modelForm" (ngSubmit)="modelForm.valid && onSubmit()">
	<mat-dialog-content class="modal-body m-t-20">
			<div class="row">
				<div class="col-md-12">
					<app-select-filter (value)="getValue($event, 'especialidad')"
					 [modelValue]="modelForm.get('especialidad')?.value"
					 sortActive="id"
					 placeholder="Especialidad" urlFilter="especialidades"
					 [columnsFilter]="['nombre']">
				 </app-select-filter>
				</div>
				<div class="col-md-12">
					<app-select-filter (value)="getValue($event, 'funcionario')" [disabled]="true"
					 labelKey="persona.primerNombre,persona.segundoNombre,persona.primerApellido"
					 [modelValue]="modelForm.get('funcionario')?.value"
					 sortActive="id"
					 placeholder="Doctor" urlFilter="profesionales/especialidad"
					 [fkFilterModel]="modelForm.get('especialidad')?.value"
					 [columnsFilter]="['persona.documento', 'persona.ruc', 'persona.primerNombre', 'persona.segundoNombre', 'persona.primerApellido']">
				 </app-select-filter>
				</div>
				<div class="col-md-12">
					<app-select-filter (value)="getValue($event, 'tipoCitas')"
					 labelKey="codigo,nombre"
					 [modelValue]="modelForm.get('tipoCitas')?.value"
					 sortActive="id"
					 placeholder="Tipo Cita" urlFilter="tipos-citas"
					 [columnsFilter]="['nombre', 'codigo']">
				 </app-select-filter>
				</div>
				<div class="col-md-4">
					<mat-form-field appearance="legacy">
						<input matInput #input [min]="minDate" [matDatepicker]="picker" placeholder="Fecha" formControlName="fechaConsulta" name="fechaConsulta"  required>
						<mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
	  				<mat-datepicker #picker></mat-datepicker>
						<mat-error *ngIf="(modelForm.get('fechaConsulta').errors)">
							<span *ngIf="modelForm.get('fechaConsulta').errors.required">
							 Campo requerido
							</span>
						</mat-error>
					</mat-form-field>
				</div>
				<div class="col-md-2">
					<mat-form-field appearance="legacy">
						<input matInput #input type="time"
						min="08:00" max="19:00" placeholder="Hora Inicio" formControlName="horaInicio" name="horaInicio"  required>
						<mat-error *ngIf="(modelForm.get('horaInicio').errors)">
							<span *ngIf="modelForm.get('horaInicio').errors.required">
							 Campo requerido
							</span>
						</mat-error>
					</mat-form-field>
				</div>
				<div class="col-md-2">
					<mat-form-field appearance="legacy">
						<input matInput #input type="time"
						min="08:00" max="19:00" placeholder="Hora Fin" formControlName="horaFin" name="horaFin"  required>
						<mat-error *ngIf="(modelForm.get('horaFin').errors)">
							<span *ngIf="modelForm.get('horaFin').errors.required">
							 Campo requerido
							</span>
						</mat-error>
					</mat-form-field>
				</div>
				<div class="col-md-4">
					<mat-form-field appearance="legacy">
						<input matInput #input  placeholder="Duracion" formControlName="duracion" name="duracion" required>
					</mat-form-field>
				</div>
				<div class="col-md-4">
					<section class="example-section">
							 <mat-checkbox  class="example-margin">Cita Repetida</mat-checkbox>
					</section>
				</div>
				<div class="col-md-12 m-t-20">
					<div class="row">
						<div class="col-md-6">
							<h4  class="m-0"><mat-icon class="gray-text">assignment</mat-icon>Paciente</h4>
						</div>
						<div class="col-md-6 m-t-20">
							<mat-radio-group formControlName="nuevoCliente" name="nuevoCliente">
								<mat-radio-button [value]="true">Nuevo</mat-radio-button>
								<mat-radio-button [value]="false" checked="true">Existente</mat-radio-button>
							</mat-radio-group>
						</div>
					</div>
				</div>

				<div class="col-md-12" *ngIf="!modelForm.get('nuevoCliente').value">
					<app-select-filter (value)="getValue($event, 'cliente')"
					 labelKey="persona.primerNombre,persona.segundoNombre,persona.primerApellido"
					 [modelValue]="modelForm.get('cliente')?.value"
					 sortActive="id"
					 placeholder="Paciente" urlFilter="clientes"
					 [columnsFilter]="['persona.documento', 'persona.ruc', 'persona.primerNombre', 'persona.segundoNombre', 'persona.primerApellido']">
				 </app-select-filter>
				</div>
				<div class="col-md-6 col-lg-6 col-xl-12">
						<div class="card card-body">
								<div class="row">
										<div class="col-md-3 col-lg-2 text-center">
												<a href="app-contact-detail.html"><img src="../assets/images/users/1.jpg" alt="user" width="90" class="rounded-circle img-fluid"></a>
										</div>
										<div class="col-md-8 col-lg-9 text-center text-md-left">
												<h3 class="mb-0">
													{{
								          (modelForm.get('cliente')?.value?.persona?.primerNombre == null ? '' : modelForm.get('cliente')?.value?.persona?.primerNombre)
								          + ' ' +
								          (modelForm.get('cliente')?.value?.persona?.segundoNombre == null ? '' : modelForm.get('cliente')?.value?.persona?.segundoNombre)
								          + ' ' +
								          (modelForm.get('cliente')?.value?.persona?.primerApellido == null ? '' : modelForm.get('cliente')?.value?.persona?.primerApellido)
								          + ' ' +
								          (modelForm.get('cliente')?.value?.persona?.segundoApellido == null ? '' : modelForm.get('cliente')?.value?.persona?.segundoApellido)
								          }}
												</h3> <small>{{modelForm.get('cliente')?.value?.persona?.profesion?.nombre == null ? '' : modelForm.get('cliente')?.value?.persona?.profesion?.nombre}}</small>
												<address>
														{{modelForm.get('cliente')?.value?.persona?.direccionParticular == null ? '' : modelForm.get('cliente')?.value?.persona?.direccionParticular}}
	      										<br>
														<abbr title="Phone" *ngIf="modelForm.get('cliente')?.value?.persona">Tel.:</abbr> {{(modelForm.get('cliente')?.value?.persona?.telefonoParticular == null ? '' : modelForm.get('cliente')?.value?.persona?.telefonoParticular)
									          + (modelForm.get('cliente')?.value?.persona?.telefonoSecundario == null ? '' : ' / ' + modelForm.get('cliente')?.value?.persona?.telefonoSecundario)}}
												</address>
										</div>
										<div class="col-md-12 m-t-10 col-lg-2 text-center" *ngIf="modelForm.get('nuevoCliente').value">
											<button type="button" class="btn btn-outline-success btn-rounded">
											Agregar Paciente
										 </button>
										</div>
								</div>
						</div>
				</div>
				<div class="col-md-12 m-t-20">
					<section class="example-section">
							 <mat-checkbox formControlName="recordatorio" name="recordatorio">Enviar recordatorio por correo</mat-checkbox>
					</section>
				</div>
				<div class="col-md-12">
					<mat-form-field appearance="legacy">
						<textarea matInput placeholder="Observaciones" formControlName="observacion" name="observacion"></textarea>
					</mat-form-field>
				</div>
				<div class="col-md-6">
					<app-select-filter (value)="getValue($event, 'estadoCitas')"
					 labelKey="codigo,nombre"
					 [modelValue]="modelForm.get('estadoCitas')?.value"
					 sortActive="id"
					 placeholder="Estado Cita" urlFilter="estado-citas"
					 [columnsFilter]="['nombre', 'codigo']">
				 </app-select-filter>
				</div>
				<div class="col-md-6">
					<mat-form-field appearance="legacy">
						<input matInput #input  placeholder="CÃ³mo nos ha conocido"  required>
						<!-- <mat-error *ngIf="(businessForm.get('ruc').errors)">
							<span *ngIf="businessForm.get('ruc').errors.required">
							 Campo requerido
							</span>
						</mat-error> -->
					</mat-form-field>
				</div>
			</div>
	</mat-dialog-content>
	<mat-dialog-actions align="end">
	  <button mat-button mat-dialog-close>Cancel</button>
		<button class="btn btn-outline-secondary" mat-button [type]="onSubmit">
			Guardar
		</button>
	</mat-dialog-actions>
</form>
<!-- <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
	<mat-dialog-content>
		<div class="row m-t-20">
			<div class="col-md-12">
				<div class="row">
					<div class="col-md-12">
						<app-people></app-people>
					</div>
					<div class="col-md-12" *ngIf="addSpouse">
						<app-spouse [addModel]="addSpouse"></app-spouse>
					</div>
					<div class="col-md-12">
						<app-reference [minRow]="1"></app-reference>
					</div>
					<div class="col-md-12">
						<app-occupation [minRow]="1"></app-occupation>
					</div>
					<div class="col-md-12">
						<app-estate></app-estate>
					</div>
					<div class="col-md-12">
						<app-vehicle></app-vehicle>
					</div>
					<div class="col-md-12 m-t-30">
						<div class="row">
							<div class="col-md-6">
								<app-ingress [minRow]="1"></app-ingress>
							</div>
							<div class="col-md-6">
								<app-egress [minRow]="1"></app-egress>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
  </mat-dialog-content>
	<mat-dialog-actions align="end">
	  <button mat-button mat-dialog-close>Cancelar</button>
	  <button mat-button [type]="onSubmit" cdkFocusInitial>Guardar</button>
	</mat-dialog-actions>
</form> -->
